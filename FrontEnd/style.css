/* ---------- Design tokens ---------- */
:root{
  --bg-page:#f4f4f5;
  --bg:#fff;
  --bg-card:#fff;
  --text-main:#222;
  --text-dim:#444;
  --line:#e2e2e2;
  --line-soft:#ddd;
  --line-softer:#eee;
  --bg-th:#f9f9f9;

  --radius-card:12px;
  --radius-ctl:10px;

  --shadow-card:0 20px 40px rgba(0,0,0,.12);
  --header-h:4.5rem;
}

/* ---------- Resets / base ---------- */
*{box-sizing:border-box}
html,body{height:100%}
html{background:var(--bg-page); color:var(--text-main)}
body{
  margin:0;
  font:14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:var(--bg);
}

/* Utilities */
.sr-only{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
[hidden]{display:none!important}
button[disabled],input[disabled],select[disabled]{opacity:.55;cursor:not-allowed}

/* ---------- Header ---------- */
.app-header{
  position:sticky; top:0; z-index:1000;
  display:flex; align-items:center; justify-content:space-between; gap:1rem;
  min-height:var(--header-h);
  padding:1rem;
  background:#fff; border-bottom:1px solid var(--line);
  box-shadow:0 4px 12px rgba(0,0,0,.04);
}
.user-bar{display:flex; align-items:center; gap:.75rem}
#roleBadge{padding:.25rem .5rem; border:1px solid var(--line); border-radius:999px; font-size:.8rem}

/* ---------- Auth (login) ---------- */
#loginSection{display:grid; place-items:center; padding:3rem 1rem}
.auth-form{
  display:grid; gap:.75rem; width:100%; max-width:360px;
  padding:1.25rem; border:1px solid var(--line); border-radius:var(--radius-card);
  background:var(--bg-card); box-shadow:0 10px 30px rgba(0,0,0,.06);
}
.auth-form input,.auth-form button{
  padding:.7rem .8rem; border:1px solid var(--line); border-radius:var(--radius-ctl);
}
.auth-form button{background:#111;color:#fff;border-color:#111;cursor:pointer}

/* ---------- Toolbar / filters ---------- */
.toolbar{
  display:flex; flex-wrap:wrap; align-items:center; gap:.5rem 1rem;
  padding:1rem; border-bottom:1px solid var(--line); background:#fafafa;
}
.toolbar input[type="search"],
.toolbar input[type="text"],
.toolbar select{
  padding:.55rem .6rem; border:1px solid var(--line); border-radius:var(--radius-ctl); background:#fff;
}
.toolbar button{
  padding:.55rem .8rem; border:1px solid var(--line); border-radius:var(--radius-ctl);
  background:#fff; cursor:pointer;
}

/* ---------- Table region ---------- */
.table-scroll-region{
  position:relative; overflow:auto;
  height:calc(100vh - var(--header-h) - 9rem); /* header + toolbar + pager */
  border-top:1px solid var(--line); background:#fff;
}

table{border-collapse:collapse; width:100%}
.file-table{table-layout:fixed; font-size:.9rem; background:var(--bg-card)}
.file-table thead th,.file-table tbody td{
  padding:.6rem .75rem; border-bottom:1px solid var(--line-softer); text-align:left;
}
.file-table-head th{
  position:sticky; top:0; z-index:10; background:var(--bg-th);
  font-weight:600; font-size:.75rem; color:#444;
  backdrop-filter:blur(6px); -webkit-backdrop-filter:blur(6px);
  box-shadow:0 2px 6px rgba(0,0,0,.05);
}
#itemsTbody tr:hover{background:#fcfcfc}
#itemsTbody td .clickable{cursor:pointer; text-decoration:underline}

/* Sorting indicators */
.file-table-head th.sort-active{color:#000}
.file-table-head th.sort-asc::after{content:" ▲"; font-size:.7em}
.file-table-head th.sort-desc::after{content:" ▼"; font-size:.7em}

/* ---------- Pager ---------- */
.pager{
  display:flex; align-items:center; justify-content:center; gap:1rem;
  padding:1rem; border-top:1px solid var(--line); background:#fafafa;
}
.pager button{
  padding:.5rem .8rem; border:1px solid var(--line); border-radius:var(--radius-ctl);
  background:#fff; cursor:pointer;
}
#pagerStatus{opacity:.8}

/* ---------- Dialogs (item drawer + movement) ---------- */
dialog{border:none; padding:0; border-radius:16px; box-shadow:0 20px 60px rgba(0,0,0,.15)}
dialog::backdrop{background:rgba(0,0,0,.35)}
#itemDrawer,#movementModal{max-width:720px; width:min(95vw,720px); background:var(--bg-card)}
#itemDrawer > div,#movementModal .modal-body{padding:1rem 1.25rem}
.drawer-actions{display:flex; gap:.5rem; justify-content:flex-end; padding:0 1.25rem 1.25rem}
#itemDetail h3{margin:.25rem 0 .5rem}
#itemDetail small{font-weight:400; opacity:.7}

/* Movement tabs + forms */
.tabs{display:flex; gap:.5rem; padding:1rem 1.25rem .5rem; border-bottom:1px solid var(--line); background:#fafafa}
.tabs button{padding:.45rem .7rem; border:1px solid var(--line); border-radius:var(--radius-ctl); background:#fff; cursor:pointer}
.modal-body form{
  display:grid; grid-template-columns:1fr 1fr; gap:.6rem .8rem; margin:.75rem 0 0;
}
.modal-body form h3{grid-column:1/-1; margin:.25rem 0 .25rem}
.modal-body input,.modal-body button{
  padding:.6rem .7rem; border:1px solid var(--line); border-radius:var(--radius-ctl); background:#fff;
}
.modal-body button[type="submit"]{
  grid-column:1/-1; justify-self:end; background:#111; color:#fff; border-color:#111; cursor:pointer;
}

/* ---------- Admin area ---------- */
#adminSection{padding:1rem; display:grid; gap:2rem}
.admin-block{border:1px solid var(--line); border-radius:var(--radius-card); overflow:hidden; background:#fff}
.admin-block h3{margin:0; padding:.75rem 1rem; border-bottom:1px solid var(--line); background:#fafafa}
.admin-block form{
  display:flex; flex-wrap:wrap; gap:.5rem; padding:.75rem 1rem; border-bottom:1px solid var(--line)
}
.admin-block form input,.admin-block form select,.admin-block form button{
  padding:.55rem .6rem; border:1px solid var(--line); border-radius:var(--radius-ctl); background:#fff;
}
.admin-block table{width:100%; border-collapse:collapse}
.admin-block td{padding:.6rem .75rem; border-top:1px solid var(--line-softer)}
.admin-block tr:hover{background:#fcfcfc}

/* ---------- Badges ---------- */
.badge{
  display:inline-block; font-size:.7rem; line-height:1.2; font-weight:500;
  border-radius:999px; padding:.25rem .5rem; border:1px solid transparent; white-space:nowrap;
}
.badge-status-available{background:#dff7e6;color:#145d2e;border-color:#8fd7a3}
.badge-status-out{background:#fff3cc;color:#7a4b00;border-color:#e6c46a}
.badge-status-archived{background:#e6e6e6;color:#2f2f2f;border-color:#bfbfbf}
.badge-clearance-1{background:#d8f3ff;color:#134f5e;border-color:#b6e3f1}
.badge-clearance-2{background:#e7e3ff;color:#302865;border-color:#c9c2f1}
.badge-clearance-3{background:#ffe5d3;color:#653010;border-color:#f1c09c}
.badge-clearance-4{background:#ffd7d7;color:#641313;border-color:#e7b4b4}

/* ---------- Role gating ---------- */
[data-requires-role="admin"][hidden]{display:none!important}
